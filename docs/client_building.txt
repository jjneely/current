Here are just some very quick, very rough notes on how to build custom 
rhn_register and up2date clients, customized for your site.

Note that this isn't required - you can simply install redhat's clients, 
and change the config files to point to your Current server. However, larger
sites, like mine, would prefer to just modify one config file, and then
build new packages. It also installs a nice cron job for running up2date
every night, since Current 1.0.x doesn't support rhnsd yet.

Note also that if you are new to Current, or new to building rpms, you
should not attempt these instructions. While I've tried to make them
as clear as possible, you really should run current a while before 
attempting this. 

These instructions use two particular versions of rhn_register and 
up2date. They'll work with any client current supports (See the README
file for a list) - but instead of copying the spec file I provide, 
you should modify the proper one (they do change, if not much), using
the one I ship as an example. (I ship old rhn_register v2.7.2 and 
up2date v2.7.11 spec files). Just use them as examples.

If you improve them, shoot your versions back to the list.


RHN_REGISTER INSTRUCTIONS
-------------------------
1. Decide where you want to install your server, and do so. 
   rpm -Uvh current-1.0-1.noarch.rpm
   
2. Grab the rhn_register and up2date src rpm's from somewhere. You'll also
   need to grab any dependancies of these clients, which on 7.1 and 7.0
   includes the python-popt package and newer versions of python-xmlrpc.
   
   There's nothing I can do about having to upgrade those by hand - you
   have to bootstrap somehow.
   
3. Install the source rpm for rhn_register. For these instructions, I'm 
   going to assume you are using the standard location, /usr/src/redhat.

   rpm -Uvh rhn_register-2.7.2-7.x.8.src.rpm
   
4. Copy the spec file and the config file from the Current doc directory 
   into your build tree.
   
   cp /usr/share/doc/current-0.99.1/client/rhn_register.spec.sample 
      /usr/src/redhat/SPECS/rhn_register.spec
      
   cp /usr/share/doc/current-0.99.1/client/rhn_register.config
      /usr/src/redhat/SOURCES/rhn_register.config
      
5. VERY IMPORTANT.
   Now, edit that config file you just copied in, and where it says 
   YOUR.SERVER.NAME, replace it with the fully qualified domain name
   of your server. Don't touch the port number or the XMLRPC part.
   
6. Now you should be able to change into the SPECS directory and 

   rpm -ba rhn_register.spec
   
   The results should be 3 rpms - a new source rpm, a rhn_register rpm, 
   and a gnome rpm. 
   
   Copy the two non-source rpms into your install tree or whatever.               
     
     
UP2DATE INSTRUCTIONS
--------------------

7. clean up your /usr/src/redhat build space. 
   rpm --clean --rmsource --rmspec should do it, but it doens't always work
   for me.
   
8. Install the source rpm for up2date. 

   rpm -Uvh  up2date-2.7.11-7.x.2.src.rpm
   
9. Copy  the spec file, the config file, and the little cron job into your
   build tree.
   
   cp /usr/share/doc/current-0.99.1/client/up2date.spec.sample
      /usr/src/redhat/SPECS/up2date.spec

   cp /usr/share/doc/current-0.99.1/client/up2date.config
      /usr/src/redhat/SOURCES/up2date.config

   cp /usr/share/doc/current-0.99.1/client/up2date.cron
      /usr/src/redhat/SOURCES/up2date.cron

10. VERY IMPORTANT
    Now, edit that config file in the same way you did the one for 
    rhn_register. Its a little more complex, as up2date is more complex than
    rhn_register. Again, don't mess with the port numbers or the XMLRPC 
    part - just change the YOUR.SERVER.NAME to be the machine you will 
    actually run Current from.
    
11. ALSO VERY IMPORTANT
    up2date has an extra step not required by rhn_register. You need to 
    create or reuse your existing RHNS-CA-CERT file. Please see the 
    server installation instructions for what that is.
    
    cp /etc/current/RHNS-CA-CERT /usr/src/redhat/SOURCES/RHNS-CA-CERT    

12. VERY IRRITATING
    You will probably have to build up2date twice, once for 7.2 and later,
    and once for 7.1 and previous. This is because of up2date now 
    requiring the popt module, which is imported differently for 7.2/pre-7.2,
    and the grub bootloader.
    
    Look at the very top of the up2date.spec file to see whats going on -
    and its not my fault.
        
13. Now you should be able to change into the SPECS directory and 

    rpm -ba up2date.spec
    
    Again, they're be 3 rpms output, and you'll want to make use of the 
    two non-source rpms.

14. Install those rpms on your clients, and you should be good to go.
    If the up2date client fails to install due to popt issues or something,
    go back nad look at step 12 again.
    
    
RHN-APPLET INSTRUCTIONS
-----------------------

Nothing here yet, as we don't support rhn-applet. 

    
        
