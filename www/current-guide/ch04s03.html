<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Configuring Up2date</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Current: An Open Source Server for Red Hat's up2date Updater"><link rel="up" href="ch04.html" title="Chapter 4. Client Configuration"><link rel="previous" href="ch04s02.html" title="Certificate File"><link rel="next" href="ch04s04.html" title="Registering Your Clients"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configuring Up2date</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Client Configuration</th><td width="20%" align="right"> <a accesskey="n" href="ch04s04.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="registerconfig"></a>Configuring Up2date</h2></div></div><div></div></div><p>
The configuration file for <span><b class="command">up2date</b></span> is located in
<tt class="filename">/etc/sysconfig/rhn/up2date</tt>.  It is a simple ASCII
text file, and the format is a simple key=value type, with no more than one 
key/value pair per line.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
    If you work working with clients using Red Hat Linux 7.3 or earlier
    you will need to modify <tt class="filename">/etc/sysconfig/rhn/rhn_register</tt>
    as well.  It contains similar information to the <span><b class="command">up2date
    </b></span> configuration file.  This same modifications you make
    to the <span><b class="command">up2date</b></span> configuration file need to be made
    here as well.
  </p></div><p>
There are three lines in this file we are concerned about.  The first one we
will cover deals with the certificate file generated by the user of Current
when first initializing the server.  The default setting, as shipped by Red Hat
is:
</p><pre class="screen">
sslCACert=/usr/share/rhn/RHNS-CA-CERT
</pre><p>
For our discussion, we will assume you have already places the certificate file
on the client system as discussed above, and given it the name 
<tt class="filename">CURRENT-CA-CERT</tt>.  To use that file, simply change the line
above to read:
</p><pre class="screen">
sslCACert=/usr/share/rhn/CURRENT-CA-CERT
</pre><p>
</p><p>
The other two lines we are concerned about are the lines giving the location of
both the SSL and non-SSL server(s) from which to actually retrieve package
information and actual packages.  Those two lines, as shipped by Red Hat, are:
</p><pre class="screen">
serverURL=https://www.rhns.redhat.com/XMLRPC
</pre><p>
for the SSL server, and
</p><pre class="screen">
noSSLServerURL=https://www.rhns.redhat.com/XMLRPC
</pre><p>
for the non-SSL server.  The portion you will need to modify is the hostname
portion of the URLs; if you modify the 
<tt class="computeroutput">/XMLRPC</tt> portion of the URLs, neither 
<span><b class="command">rhn_register</b></span> nor <span><b class="command">up2date</b></span> will work with 
your Current server.  For my testing purposes, which involves using the same 
machine as both client and server, those lines appear in my configuration file 
as:
</p><pre class="screen">
serverURL=https://localhost/XMLRPC
</pre><p>
and
</p><pre class="screen">
noSSLServerURL=http://localhost/XMLRPC
</pre><p>
</p><p>
The next line of concern in the <tt class="filename">up2date</tt> configuration
file is not critical to normal operations, but needs to be mentioned for those
security-conscious individuals who use GPG to sign custom or modified packages.
In the default Red Hat configuration, there is a line:
</p><pre class="screen">
gpgKeyRing=/etc/sysconfig/rhn/up2date-keyring.gpg
</pre><p>
which tells the <span><b class="command">up2date</b></span> client where to find the GPG key to
use to verify package signatures.  If you wish to use GPG signature
verification on the clients, you must either change this line to reflect the
location of the GPG key used to sign the packages (after putting that key into
a key ring on the client, of course), or you must add that key to the key ring
in the file specified.
</p><p>
Please note that if you choose to GPG sign your packages, you must use one of
the two above methods to allow signature checking; a recent change to RPM now
requires a signature check to pass if there is a GPG signature on the package.
This is not a behavior of Current or of <span><b class="command">up2date</b></span>, but is
a behavior of RPM itself.
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Certificate File </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Registering Your Clients</td></tr></table></div></body></html>
